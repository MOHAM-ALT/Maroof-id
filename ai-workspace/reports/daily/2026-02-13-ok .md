# ğŸš€ Ø§Ù„Ø®Ø·Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø© ÙˆØ§Ù„Ø´Ø§Ù…Ù„Ø© - Ù…Ù†ØµØ© Ù…Ø¹Ø±ÙˆÙ SaaS
## Ø®Ø·Ø© ØªÙ†ÙÙŠØ° Ù…ØªÙƒØ§Ù…Ù„Ø© Ù…Ù† Ø§Ù„ØµÙØ± Ø¥Ù„Ù‰ Ø§Ù„Ø¥Ø·Ù„Ø§Ù‚

**Ø§Ù„ØªØ§Ø±ÙŠØ®:** 13 ÙØ¨Ø±Ø§ÙŠØ± 2026  
**Ø§Ù„Ù…Ø¯Ø© Ø§Ù„ÙƒÙ„ÙŠØ© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©:** 50-60 Ø³Ø§Ø¹Ø© Ø¹Ù…Ù„  
**Ø§Ù„Ù‡Ø¯Ù:** Ø¨Ù†Ø§Ø¡ Ù…Ù†ØµØ© Ù…Ø¹Ø±ÙˆÙ ÙƒØ§Ù…Ù„Ø© 100% Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„Ø¥Ù†ØªØ§Ø¬

---

# ğŸ“Š Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø±Ø§Ø­Ù„

```
Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1: Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø© (Foundation)           [âœ… Ù…ÙƒØªÙ…Ù„Ø© 100%] - 8 Ø³Ø§Ø¹Ø§Øª
Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2: Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (Core Services) [â³ 0%] - 8 Ø³Ø§Ø¹Ø§Øª
Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3: Controllers & Logic            [â³ 30%] - 10 Ø³Ø§Ø¹Ø§Øª
Ø§Ù„Ù…Ø±Ø­Ù„Ø© 4: Filament Admin Dashboard       [â³ 20%] - 10 Ø³Ø§Ø¹Ø§Øª
Ø§Ù„Ù…Ø±Ø­Ù„Ø© 5: Frontend Views & UX            [â³ 30%] - 8 Ø³Ø§Ø¹Ø§Øª
Ø§Ù„Ù…Ø±Ø­Ù„Ø© 6: API & Integrations             [â³ 5%] - 8 Ø³Ø§Ø¹Ø§Øª
Ø§Ù„Ù…Ø±Ø­Ù„Ø© 7: Email & Notifications          [â³ 0%] - 4 Ø³Ø§Ø¹Ø§Øª
Ø§Ù„Ù…Ø±Ø­Ù„Ø© 8: Testing & Quality Assurance    [â³ 0%] - 4 Ø³Ø§Ø¹Ø§Øª
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Ø¥Ø¬Ù…Ø§Ù„ÙŠ: 60 Ø³Ø§Ø¹Ø©
```

---

# ğŸ“‹ Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1: Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø© (Foundation) - âœ… Ù…ÙƒØªÙ…Ù„Ø©

## Ø§Ù„Ø­Ø§Ù„Ø©: âœ… 100% Ù…Ù†Ø¬Ø²Ø©

### Ù…Ø§ ØªÙ… Ø¥Ù†Ø¬Ø§Ø²Ù‡:
- âœ… **11 Models** Ù…Ø¹ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù€ Relationships
- âœ… **24 Migrations** Ù…Ø¹ Foreign Keys Ùˆ Indexes
- âœ… **RoleSeeder** Ù…Ø¹ 7 Ø£Ø¯ÙˆØ§Ø±
- âœ… **DatabaseSeeder** Ù…Ø¹ admin user
- âœ… **User Model** Ù…Ø¹ HasRoles trait
- âœ… **LoginController & RegisterController**
- âœ… **DashboardController**
- âœ… **RoleSwitchController**
- âœ… **Basic Views** (login, register, dashboard)
- âœ… **UserResource & TemplateResource** ÙÙŠ Filament

### Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø©:
```
app/Models/
â”œâ”€â”€ User.php âœ…
â”œâ”€â”€ Card.php âœ…
â”œâ”€â”€ Template.php âœ…
â”œâ”€â”€ Order.php âœ…
â”œâ”€â”€ Partner.php âœ…
â”œâ”€â”€ Reseller.php âœ…
â”œâ”€â”€ ResellerInventory.php âœ…
â”œâ”€â”€ ResellerSale.php âœ…
â”œâ”€â”€ Designer.php âœ…
â”œâ”€â”€ Affiliate.php âœ…
â”œâ”€â”€ AffiliateClick.php âœ…
â”œâ”€â”€ Coupon.php âœ…
â”œâ”€â”€ Payout.php âœ…
â”œâ”€â”€ BusinessAccount.php âœ…
â””â”€â”€ Notification.php âœ…

database/migrations/ [24 Ù…Ù„Ù] âœ…
database/seeders/ [2 Ù…Ù„Ù] âœ…
```

**â° Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø³ØªØºØ±Ù‚:** 8 Ø³Ø§Ø¹Ø§Øª  
**âœ… Ø§Ù„Ù†ØªÙŠØ¬Ø©:** Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ù‚ÙˆÙŠØ© ÙˆÙ…Ù†Ø¸Ù…Ø©

---

# ğŸ”§ Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2: Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (Core Services)

## Ø§Ù„Ø­Ø§Ù„Ø©: â³ 0% - ÙŠØ­ØªØ§Ø¬ Ø¹Ù…Ù„ ÙƒØ§Ù…Ù„

**â° Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªÙˆÙ‚Ø¹:** 8 Ø³Ø§Ø¹Ø§Øª

### Ø§Ù„Ù‡Ø¯Ù:
Ø¥Ù†Ø´Ø§Ø¡ Ø·Ø¨Ù‚Ø© Services Ù‚ÙˆÙŠØ© ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ ÙƒÙ„ Ø§Ù„Ù…Ù†Ø·Ù‚ Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠ (Business Logic)

---

## ğŸ“¦ 2.1 - CardService.php

**Ø§Ù„Ù…Ø³Ø§Ø±:** `app/Services/CardService.php`  
**â° Ø§Ù„ÙˆÙ‚Øª:** 1.5 Ø³Ø§Ø¹Ø©

### Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:

```php
<?php
namespace App\Services;

class CardService
{
    // 1. Ø¥Ù†Ø´Ø§Ø¡ Ø¨Ø·Ø§Ù‚Ø© Ø¬Ø¯ÙŠØ¯Ø©
    public function createCard(array $data): Card
    {
        // - Validate data
        // - Upload images (profile, cover)
        // - Generate unique username/slug
        // - Create card record
        // - Return card
    }

    // 2. ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©
    public function updateCard(Card $card, array $data): Card
    {
        // - Validate data
        // - Handle image updates
        // - Update card record
        // - Return updated card
    }

    // 3. Ø­Ø°Ù Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©
    public function deleteCard(Card $card): bool
    {
        // - Delete related data (orders, analytics)
        // - Delete images from storage
        // - Soft delete card
        // - Return success
    }

    // 4. Ù†Ø´Ø±/Ø¥Ù„ØºØ§Ø¡ Ù†Ø´Ø± Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©
    public function publishCard(Card $card, bool $publish = true): Card
    {
        // - Update status (active/inactive)
        // - Send notification if published
        // - Return card
    }

    // 5. Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªØ­Ù„ÙŠÙ„Ø§Øª Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©
    public function getAnalytics(Card $card, string $period = '30days'): array
    {
        // - Total views
        // - Unique visitors
        // - Geographic data
        // - Device types
        // - Time-based charts
        // - Return analytics array
    }

    // 6. ØªØªØ¨Ø¹ Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©
    public function trackView(Card $card, Request $request): void
    {
        // - Get visitor IP
        // - Get device info
        // - Get location (optional)
        // - Increment view counter
        // - Log to analytics table
    }

    // 7. Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© (Generate QR)
    public function generateQRCode(Card $card): string
    {
        // - Generate QR code image
        // - Save to storage
        // - Return URL
    }

    // 8. Ù†Ø³Ø® Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© (Duplicate)
    public function duplicateCard(Card $card): Card
    {
        // - Clone card data
        // - Generate new username
        // - Create new record
        // - Return new card
    }
}
```

**Ø§Ù„Ø­Ø²Ù… Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:**
```bash
composer require intervention/image
composer require simplesoftwareio/simple-qrcode
```

---

## ğŸ“¦ 2.2 - OrderService.php

**Ø§Ù„Ù…Ø³Ø§Ø±:** `app/Services/OrderService.php`  
**â° Ø§Ù„ÙˆÙ‚Øª:** 1.5 Ø³Ø§Ø¹Ø©

### Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:

```php
<?php
namespace App\Services;

class OrderService
{
    // 1. Ø¥Ù†Ø´Ø§Ø¡ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯
    public function createOrder(array $data): Order
    {
        // - Validate data
        // - Calculate total (price + tax - discount)
        // - Apply coupon if exists
        // - Create order record (status: pending)
        // - Send OrderConfirmationMail
        // - Dispatch ProcessOrder job
        // - Return order
    }

    // 2. ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨
    public function updateStatus(Order $order, string $status): Order
    {
        // - Validate status (pending, processing, completed, cancelled)
        // - Update order status
        // - Log to timeline/history
        // - Send status notification email
        // - Trigger events if needed
        // - Return order
    }

    // 3. ØªØ·Ø¨ÙŠÙ‚ ÙƒÙˆØ¨ÙˆÙ† Ø®ØµÙ…
    public function applyCoupon(Order $order, string $couponCode): Order
    {
        // - Find coupon
        // - Validate coupon (active, not expired, usage limits)
        // - Calculate discount
        // - Apply to order
        // - Increment coupon usage
        // - Return updated order
    }

    // 4. Ø­Ø³Ø§Ø¨ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ
    public function calculateTotal(Order $order): float
    {
        // - Base price
        // - Add tax (15% VAT)
        // - Subtract discount
        // - Return final total
    }

    // 5. Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨
    public function cancelOrder(Order $order, string $reason = null): Order
    {
        // - Update status to cancelled
        // - Process refund if paid
        // - Send cancellation email
        // - Log reason
        // - Return order
    }

    // 6. ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø·Ù„Ø¨ Ø¹Ù„Ù‰ Ø´Ø±ÙŠÙƒ
    public function assignPartner(Order $order): Order
    {
        // - Find available partner
        // - Check partner capacity/region
        // - Assign order to partner
        // - Send PartnerNewOrderMail
        // - Return order
    }

    // 7. Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
    public function getUserOrders(User $user, array $filters = []): Collection
    {
        // - Query user orders
        // - Apply filters (status, date range)
        // - Order by created_at DESC
        // - Paginate or return collection
    }
}
```

---

## ğŸ“¦ 2.3 - PaymentService.php

**Ø§Ù„Ù…Ø³Ø§Ø±:** `app/Services/PaymentService.php`  
**â° Ø§Ù„ÙˆÙ‚Øª:** 2 Ø³Ø§Ø¹Ø§Øª

### Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:

```php
<?php
namespace App\Services;

use TapPayment\Tap;

class PaymentService
{
    // 1. Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¯ÙØ¹
    public function processPayment(Order $order, array $paymentData): array
    {
        // - Validate payment method
        // - Create Tap.sa charge
        // - Or process Stripe
        // - Or handle wallet payment
        // - Create transaction record
        // - Return payment result (success/failure + redirect URL)
    }

    // 2. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¯ÙØ¹ (Webhook)
    public function verifyPayment(string $transactionId): bool
    {
        // - Query Tap.sa API
        // - Verify payment status
        // - Update transaction record
        // - Update order status if successful
        // - Send PaymentReceiptMail
        // - Return success/failure
    }

    // 3. Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù…Ø¨Ù„Øº (Refund)
    public function issueRefund(Order $order, float $amount = null): array
    {
        // - Find transaction
        // - Create refund request to Tap.sa
        // - Update transaction record
        // - Send refund notification email
        // - Return refund result
    }

    // 4. Ø¥Ù†Ø´Ø§Ø¡ ÙØ§ØªÙˆØ±Ø©
    public function generateReceipt(Order $order): string
    {
        // - Get order details
        // - Generate PDF invoice
        // - Save to storage
        // - Return PDF path/URL
    }

    // 5. Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø·Ø±Ù‚ Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ù…ØªØ§Ø­Ø©
    public function getAvailablePaymentMethods(): Collection
    {
        // - Query PaymentMethod model
        // - Filter active methods
        // - Return collection
    }
}
```

**Ø§Ù„Ø­Ø²Ù… Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:**
```bash
composer require tap-payments/tap-laravel
composer require stripe/stripe-php
composer require barryvdh/laravel-dompdf
```

---

## ğŸ“¦ 2.4 - CommissionService.php

**Ø§Ù„Ù…Ø³Ø§Ø±:** `app/Services/CommissionService.php`  
**â° Ø§Ù„ÙˆÙ‚Øª:** 2 Ø³Ø§Ø¹Ø§Øª

### Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:

```php
<?php
namespace App\Services;

class CommissionService
{
    // 1. Ø­Ø³Ø§Ø¨ Ø¹Ù…ÙˆÙ„Ø© Ø´Ø±ÙŠÙƒ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© (5 Ù…Ø³ØªÙˆÙŠØ§Øª)
    public function calculatePartnerCommission(Partner $partner, Order $order): float
    {
        // Ù…Ø³ØªÙˆÙŠØ§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡:
        // Level 1 (0-50 orders): 15 SAR/order
        // Level 2 (51-150): 18 SAR/order
        // Level 3 (151-300): 22 SAR/order
        // Level 4 (301-500): 25 SAR/order
        // Level 5 (501+): 30 SAR/order
        
        // - Get partner's total orders count
        // - Determine level
        // - Calculate commission
        // - Create commission record
        // - Return commission amount
    }

    // 2. Ø­Ø³Ø§Ø¨ Ø¹Ù…ÙˆÙ„Ø© Ø§Ù„Ù…ÙˆØ²Ø¹
    public function calculateResellerCommission(Reseller $reseller, Order $order): float
    {
        // - Wholesale price: 75 SAR
        // - Retail price: 99 SAR
        // - Profit margin: 24 SAR/card
        
        // - Calculate profit
        // - Create commission record
        // - Return profit amount
    }

    // 3. Ø­Ø³Ø§Ø¨ Ø¹Ù…ÙˆÙ„Ø© Ø§Ù„Ù…ØµÙ…Ù… (70%)
    public function calculateDesignerCommission(Designer $designer, Order $order): float
    {
        // - Template price (set by designer)
        // - Designer gets: 70%
        // - Platform gets: 30%
        
        // - Calculate commission
        // - Create commission record
        // - Return commission amount
    }

    // 4. Ø­Ø³Ø§Ø¨ Ø¹Ù…ÙˆÙ„Ø© Ø§Ù„Ù…Ø³ÙˆÙ‚
    public function calculateAffiliateCommission(Affiliate $affiliate, Order $order): float
    {
        // - Order total
        // - Commission rate (5-10%)
        
        // - Calculate commission
        // - Create commission record
        // - Track affiliate click
        // - Return commission amount
    }

    // 5. Ø¥Ù†Ø´Ø§Ø¡ ØªØ­ÙˆÙŠÙ„ Ù…Ø§Ù„ÙŠ (Payout)
    public function createPayout(User $user, float $amount): Payout
    {
        // - Validate minimum payout (100 SAR)
        // - Check available balance
        // - Create payout record (status: pending)
        // - Send PayoutNotificationMail
        // - Return payout
    }

    // 6. Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØªØ­ÙˆÙŠÙ„
    public function processPayout(Payout $payout): Payout
    {
        // - Update status to processing
        // - Transfer to bank account
        // - Update status to completed
        // - Send completion email
        // - Return payout
    }

    // 7. Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
    public function getUserBalance(User $user): float
    {
        // - Sum all commissions
        // - Subtract all payouts
        // - Return available balance
    }

    // 8. Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø£Ø¯Ø§Ø¡
    public function getPerformanceReport(User $user, string $period = '30days'): array
    {
        // - Total earnings
        // - Total payouts
        // - Available balance
        // - Orders count
        // - Charts data
        // - Return array
    }
}
```

---

## ğŸ“¦ 2.5 - AnalyticsService.php

**Ø§Ù„Ù…Ø³Ø§Ø±:** `app/Services/AnalyticsService.php`  
**â° Ø§Ù„ÙˆÙ‚Øª:** 1 Ø³Ø§Ø¹Ø©

### Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:

```php
<?php
namespace App\Services;

class AnalyticsService
{
    // 1. ØªØªØ¨Ø¹ Ø­Ø¯Ø«
    public function trackEvent(string $event, array $data = []): void
    {
        // - Log event to database
        // - Or send to external service (Mixpanel, GA4)
    }

    // 2. Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ù†ØµØ©
    public function getPlatformStats(): array
    {
        // - Total users
        // - Total cards
        // - Total orders
        // - Total revenue
        // - Growth rates
        // - Return array
    }

    // 3. ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª
    public function getSalesReport(string $period): array
    {
        // - Orders by date
        // - Revenue by date
        // - Top selling templates
        // - Average order value
        // - Return array
    }

    // 4. ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
    public function getUsersReport(): array
    {
        // - New users by date
        // - Active users
        // - Users by role
        // - User retention
        // - Return array
    }
}
```

---

## ğŸ“¦ 2.6 - ReportService.php

**Ø§Ù„Ù…Ø³Ø§Ø±:** `app/Services/ReportService.php`  
**â° Ø§Ù„ÙˆÙ‚Øª:** 30 Ø¯Ù‚ÙŠÙ‚Ø©

### Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:

```php
<?php
namespace App\Services;

class ReportService
{
    // 1. ØªØµØ¯ÙŠØ± CSV
    public function exportToCSV(string $type, array $filters = []): string
    {
        // - Query data based on type (orders, users, etc.)
        // - Generate CSV file
        // - Save to storage
        // - Return file path
    }

    // 2. ØªØµØ¯ÙŠØ± PDF
    public function exportToPDF(string $type, array $data): string
    {
        // - Generate PDF report
        // - Save to storage
        // - Return file path
    }

    // 3. ØªØµØ¯ÙŠØ± Excel
    public function exportToExcel(string $type, array $filters = []): string
    {
        // - Generate Excel file
        // - Return file path
    }
}
```

**Ø§Ù„Ø­Ø²Ù… Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:**
```bash
composer require maatwebsite/excel
```

---

## ğŸ“¦ 2.7 - SmsService.php

**Ø§Ù„Ù…Ø³Ø§Ø±:** `app/Services/SmsService.php`  
**â° Ø§Ù„ÙˆÙ‚Øª:** 30 Ø¯Ù‚ÙŠÙ‚Ø©

### Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:

```php
<?php
namespace App\Services;

class SmsService
{
    // 1. Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© SMS
    public function send(string $to, string $message): bool
    {
        // - Use Twilio or local provider
        // - Send SMS
        // - Log message
        // - Return success/failure
    }

    // 2. Ø¥Ø±Ø³Ø§Ù„ OTP
    public function sendOTP(string $phone): string
    {
        // - Generate 6-digit code
        // - Send via SMS
        // - Store in cache (5 min expiry)
        // - Return OTP code
    }

    // 3. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† OTP
    public function verifyOTP(string $phone, string $code): bool
    {
        // - Check cached OTP
        // - Verify code
        // - Delete from cache if valid
        // - Return valid/invalid
    }
}
```

**Ø§Ù„Ø­Ø²Ù… Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:**
```bash
composer require twilio/sdk
```

---

## âœ… Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2:

### Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„ØªÙŠ Ø³ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡Ø§:
```
app/Services/
â”œâ”€â”€ CardService.php â³ (8 Ø¯ÙˆØ§Ù„)
â”œâ”€â”€ OrderService.php â³ (7 Ø¯ÙˆØ§Ù„)
â”œâ”€â”€ PaymentService.php â³ (5 Ø¯ÙˆØ§Ù„)
â”œâ”€â”€ CommissionService.php â³ (8 Ø¯ÙˆØ§Ù„)
â”œâ”€â”€ AnalyticsService.php â³ (4 Ø¯ÙˆØ§Ù„)
â”œâ”€â”€ ReportService.php â³ (3 Ø¯ÙˆØ§Ù„)
â””â”€â”€ SmsService.php â³ (3 Ø¯ÙˆØ§Ù„)
```

**â° Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:** 8 Ø³Ø§Ø¹Ø§Øª  
**ğŸ“¦ Ø§Ù„Ø­Ø²Ù… Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:** 6 Ø­Ø²Ù… composer

---

# ğŸ® Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3: Controllers & Business Logic

## Ø§Ù„Ø­Ø§Ù„Ø©: â³ 30% - ÙŠØ­ØªØ§Ø¬ Ø§Ø³ØªÙƒÙ…Ø§Ù„

**â° Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªÙˆÙ‚Ø¹:** 10 Ø³Ø§Ø¹Ø§Øª

---

## ğŸ“ 3.1 - Auth Controllers (Ù…ÙƒØªÙ…Ù„Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹)

**âœ… Ù…ÙˆØ¬ÙˆØ¯:**
- `LoginController.php` âœ…
- `RegisterController.php` âœ…

**â³ Ù†Ø§Ù‚Øµ:**
- `ForgotPasswordController.php`
- `ResetPasswordController.php`
- `EmailVerificationController.php`

**â° Ø§Ù„ÙˆÙ‚Øª:** 1.5 Ø³Ø§Ø¹Ø©

### ForgotPasswordController.php

**Ø§Ù„Ù…Ø³Ø§Ø±:** `app/Http/Controllers/Auth/ForgotPasswordController.php`

```php
<?php
namespace App\Http\Controllers\Auth;

class ForgotPasswordController extends Controller
{
    // Ø¹Ø±Ø¶ Ù†Ù…ÙˆØ°Ø¬ Ù†Ø³ÙŠØª ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
    public function show()
    {
        return view('auth.forgot-password');
    }

    // Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†
    public function sendResetLink(Request $request)
    {
        // - Validate email
        // - Find user
        // - Generate reset token
        // - Send email with link
        // - Return success message
    }
}
```

### ResetPasswordController.php

```php
<?php
namespace App\Http\Controllers\Auth;

class ResetPasswordController extends Controller
{
    // Ø¹Ø±Ø¶ Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
    public function show(Request $request, string $token)
    {
        return view('auth.reset-password', ['token' => $token]);
    }

    // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
    public function reset(Request $request)
    {
        // - Validate data
        // - Verify token
        // - Update password
        // - Login user
        // - Redirect to dashboard
    }
}
```

### EmailVerificationController.php

```php
<?php
namespace App\Http\Controllers\Auth;

class EmailVerificationController extends Controller
{
    // Ø¹Ø±Ø¶ ØµÙØ­Ø© Ø§Ù„ØªØ­Ù‚Ù‚
    public function notice()
    {
        return view('auth.verify-email');
    }

    // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØªØ­Ù‚Ù‚
    public function verify(Request $request, $id, $hash)
    {
        // - Find user
        // - Verify hash
        // - Mark email as verified
        // - Redirect to dashboard
    }

    // Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ­Ù‚Ù‚
    public function resend(Request $request)
    {
        // - Send verification email
        // - Return success message
    }
}
```

---

## ğŸ“ 3.2 - Public Controllers

**â° Ø§Ù„ÙˆÙ‚Øª:** 2 Ø³Ø§Ø¹Ø§Øª

### HomeController.php

**Ø§Ù„Ù…Ø³Ø§Ø±:** `app/Http/Controllers/Public/HomeController.php`

```php
<?php
namespace App\Http\Controllers\Public;

class HomeController extends Controller
{
    public function index()
    {
        // - Get featured templates
        // - Get stats (total users, cards created)
        // - Get testimonials
        // - Return home view
        return view('public.home', compact('templates', 'stats'));
    }
}
```

### PricingController.php

```php
<?php
namespace App\Http\Controllers\Public;

class PricingController extends Controller
{
    public function index()
    {
        // - Get pricing plans
        // - Return pricing view
        return view('public.pricing');
    }
}
```

### TemplateGalleryController.php

```php
<?php
namespace App\Http\Controllers\Public;

class TemplateGalleryController extends Controller
{
    public function index(Request $request)
    {
        // - Get all templates
        // - Filter by category (optional)
        // - Paginate
        // - Return gallery view
        $templates = Template::active()
            ->when($request->category, fn($q) => $q->where('category', $request->category))
            ->paginate(12);
        
        return view('public.templates', compact('templates'));
    }

    public function show(Template $template)
    {
        // - Get template details
        // - Get designer info
        // - Get preview
        // - Return template view
        return view('public.template-detail', compact('template'));
    }
}
```

### CardViewController.php

```php
<?php
namespace App\Http\Controllers\Public;

use App\Services\CardService;

class CardViewController extends Controller
{
    public function __construct(private CardService $cardService)
    {}

    public function show(string $username)
    {
        // - Find card by username
        // - Track view (IP, device, location)
        // - Return card view
        $card = Card::where('username', $username)
            ->where('status', 'active')
            ->firstOrFail();
        
        $this->cardService->trackView($card, request());
        
        return view('public.card', compact('card'));
    }

    public function downloadVCard(Card $card)
    {
        // - Generate vCard file
        // - Return download response
    }
}
```

---

## ğŸ“ 3.3 - Customer Controllers

**â° Ø§Ù„ÙˆÙ‚Øª:** 3 Ø³Ø§Ø¹Ø§Øª

### DashboardController.php (Ù…ÙˆØ¬ÙˆØ¯ - ÙŠØ­ØªØ§Ø¬ ØªØ­Ø³ÙŠÙ†)

```php
<?php
namespace App\Http\Controllers\Customer;

class DashboardController extends Controller
{
    public function index()
    {
        $user = auth()->user();
        
        // - Get user stats:
        //   - Total cards
        //   - Total views
        //   - Total orders
        //   - Available balance
        
        $stats = [
            'cards_count' => $user->cards()->count(),
            'total_views' => $user->cards()->sum('views_count'),
            'orders_count' => $user->orders()->count(),
            'balance' => app(CommissionService::class)->getUserBalance($user),
        ];
        
        // - Get recent cards
        $recentCards = $user->cards()->latest()->take(5)->get();
        
        // - Get recent orders
        $recentOrders = $user->orders()->latest()->take(5)->get();
        
        return view('customer.dashboard', compact('stats', 'recentCards', 'recentOrders'));
    }
}
```

### CardController.php

**Ø§Ù„Ù…Ø³Ø§Ø±:** `app/Http/Controllers/Customer/CardController.php`

```php
<?php
namespace App\Http\Controllers\Customer;

use App\Services\CardService;

class CardController extends Controller
{
    public function __construct(private CardService $cardService)
    {}

    // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª
    public function index()
    {
        $cards = auth()->user()->cards()->paginate(10);
        return view('customer.cards.index', compact('cards'));
    }

    // Ø¹Ø±Ø¶ Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡
    public function create()
    {
        $templates = Template::active()->get();
        return view('customer.cards.create', compact('templates'));
    }

    // Ø­ÙØ¸ Ø¨Ø·Ø§Ù‚Ø© Ø¬Ø¯ÙŠØ¯Ø©
    public function store(Request $request)
    {
        $card = $this->cardService->createCard($request->validated());
        
        return redirect()
            ->route('customer.cards.show', $card)
            ->with('success', 'ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø¨Ù†Ø¬Ø§Ø­');
    }

    // Ø¹Ø±Ø¶ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©
    public function show(Card $card)
    {
        $this->authorize('view', $card);
        
        $analytics = $this->cardService->getAnalytics($card);
        
        return view('customer.cards.show', compact('card', 'analytics'));
    }

    // Ø¹Ø±Ø¶ Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„
    public function edit(Card $card)
    {
        $this->authorize('update', $card);
        
        $templates = Template::active()->get();
        return view('customer.cards.edit', compact('card', 'templates'));
    }

    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©
    public function update(Request $request, Card $card)
    {
        $this->authorize('update', $card);
        
        $card = $this->cardService->updateCard($card, $request->validated());
        
        return redirect()
            ->route('customer.cards.show', $card)
            ->with('success', 'ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø¨Ù†Ø¬Ø§Ø­');
    }

    // Ø­Ø°Ù Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©
    public function destroy(Card $card)
    {
        $this->authorize('delete', $card);
        
        $this->cardService->deleteCard($card);
        
        return redirect()
            ->route('customer.cards.index')
            ->with('success', 'ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø¨Ù†Ø¬Ø§Ø­');
    }

    // Ù†Ø´Ø±/Ø¥Ù„ØºØ§Ø¡ Ù†Ø´Ø± Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©
    public function togglePublish(Card $card)
    {
        $this->authorize('update', $card);
        
        $published = !$card->is_published;
        $this->cardService->publishCard($card, $published);
        
        $message = $published ? 'ØªÙ… Ù†Ø´Ø± Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©' : 'ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ù†Ø´Ø± Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©';
        
        return back()->with('success', $message);
    }

    // ØªÙ†Ø²ÙŠÙ„ QR Code
    public function downloadQR(Card $card)
    {
        $this->authorize('view', $card);
        
        $qrPath = $this->cardService->generateQRCode($card);
        
        return response()->download($qrPath);
    }
}
```

### OrderController.php

**Ø§Ù„Ù…Ø³Ø§Ø±:** `app/Http/Controllers/Customer/OrderController.php`

```php
<?php
namespace App\Http\Controllers\Customer;

use App\Services\OrderService;

class OrderController extends Controller
{
    public function __construct(private OrderService $orderService)
    {}

    // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª
    public function index()
    {
        $orders = auth()->user()->orders()->latest()->paginate(10);
        return view('customer.orders.index', compact('orders'));
    }

    // Ø¹Ø±Ø¶ Ù†Ù…ÙˆØ°Ø¬ Ø¥Ù†Ø´Ø§Ø¡ Ø·Ù„Ø¨
    public function create()
    {
        $cards = auth()->user()->cards()->active()->get();
        return view('customer.orders.create', compact('cards'));
    }

    // Ø­ÙØ¸ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯
    public function store(Request $request)
    {
        $order = $this->orderService->createOrder($request->validated());
        
        // Redirect to payment
        return redirect()->route('customer.payment.checkout', $order);
    }

    // Ø¹Ø±Ø¶ Ø§Ù„Ø·Ù„Ø¨
    public function show(Order $order)
    {
        $this->authorize('view', $order);
        
        return view('customer.orders.show', compact('order'));
    }

    // Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨
    public function cancel(Order $order)
    {
        $this->authorize('update', $order);
        
        $this->orderService->cancelOrder($order);
        
        return back()->with('success', 'ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨');
    }
}
```

### AnalyticsController.php

**Ø§Ù„Ù…Ø³Ø§Ø±:** `app/Http/Controllers/Customer/AnalyticsController.php`

```php
<?php
namespace App\Http/Controllers/Customer;

use App\Services\AnalyticsService;
use App\Services\CardService;

class AnalyticsController extends Controller
{
    public function __construct(
        private AnalyticsService $analyticsService,
        private CardService $cardService
    ) {}

    // ØµÙØ­Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©
    public function index()
    {
        $user = auth()->user();
        
        // Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø¹Ø§Ù…Ø©
        $stats = [
            'total_views' => $user->cards()->sum('views_count'),
            'total_cards' => $user->cards()->count(),
            'active_cards' => $user->cards()->active()->count(),
        ];
        
        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØ©
        $chartsData = $this->analyticsService->getUsersReport();
        
        return view('customer.analytics.index', compact('stats', 'chartsData'));
    }

    // ØªØ­Ù„ÙŠÙ„Ø§Øª Ø¨Ø·Ø§Ù‚Ø© Ù…Ø¹ÙŠÙ†Ø©
    public function card(Card $card)
    {
        $this->authorize('view', $card);
        
        $analytics = $this->cardService->getAnalytics($card, request('period', '30days'));
        
        return view('customer.analytics.card', compact('card', 'analytics'));
    }
}
```

### ProfileController.php

**Ø§Ù„Ù…Ø³Ø§Ø±:** `app/Http/Controllers/Customer/ProfileController.php`

```php
<?php
namespace App\Http/Controllers/Customer;

class ProfileController extends Controller
{
    // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ
    public function show()
    {
        $user = auth()->user();
        return view('customer.profile.show', compact('user'));
    }

    // Ø¹Ø±Ø¶ Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„
    public function edit()
    {
        $user = auth()->user();
        return view('customer.profile.edit', compact('user'));
    }

    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ
    public function update(Request $request)
    {
        $user = auth()->user();
        
        $user->update($request->validated());
        
        return back()->with('success', 'ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ');
    }

    // ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
    public function updatePassword(Request $request)
    {
        $request->validate([
            'current_password' => 'required|current_password',
            'password' => 'required|confirmed|min:8',
        ]);
        
        auth()->user()->update([
            'password' => Hash::make($request->password)
        ]);
        
        return back()->with('success', 'ØªÙ… ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');
    }
}
```

### NotificationController.php

**Ø§Ù„Ù…Ø³Ø§Ø±:** `app/Http/Controllers/Customer/NotificationController.php`

```php
<?php
namespace App\Http/Controllers/Customer;

class NotificationController extends Controller
{
    // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
    public function index()
    {
        $notifications = auth()->user()
            ->notifications()
            ->latest()
            ->paginate(20);
        
        return view('customer.notifications.index', compact('notifications'));
    }

    // ØªØ¹Ù„ÙŠÙ… ÙƒÙ…Ù‚Ø±ÙˆØ¡
    public function markAsRead(Notification $notification)
    {
        $notification->update(['read_at' => now()]);
        
        return back();
    }

    // ØªØ¹Ù„ÙŠÙ… Ø§Ù„ÙƒÙ„ ÙƒÙ…Ù‚Ø±ÙˆØ¡
    public function markAllAsRead()
    {
        auth()->user()
            ->notifications()
            ->whereNull('read_at')
            ->update(['read_at' => now()]);
        
        return back()->with('success', 'ØªÙ… ØªØ¹Ù„ÙŠÙ… Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙƒÙ…Ù‚Ø±ÙˆØ¡Ø©');
    }
}
```

---

## ğŸ“ 3.4 - Payment Controllers

**â° Ø§Ù„ÙˆÙ‚Øª:** 2 Ø³Ø§Ø¹Ø§Øª

### PaymentController.php

**Ø§Ù„Ù…Ø³Ø§Ø±:** `app/Http/Controllers/Customer/PaymentController.php`

```php
<?php
namespace App\Http\Controllers\Customer;

use App\Services\PaymentService;

class PaymentController extends Controller
{
    public function __construct(private PaymentService $paymentService)
    {}

    // ØµÙØ­Ø© Ø§Ù„Ø¯ÙØ¹
    public function checkout(Order $order)
    {
        $this->authorize('view', $order);
        
        $paymentMethods = $this->paymentService->getAvailablePaymentMethods();
        
        return view('customer.payment.checkout', compact('order', 'paymentMethods'));
    }

    // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¯ÙØ¹
    public function process(Request $request, Order $order)
    {
        $this->authorize('update', $order);
        
        $result = $this->paymentService->processPayment($order, $request->all());
        
        if ($result['success']) {
            return redirect($result['redirect_url']);
        }
        
        return back()->with('error', $result['message']);
    }

    // ØµÙØ­Ø© Ø§Ù„Ù†Ø¬Ø§Ø­
    public function success(Order $order)
    {
        return view('customer.payment.success', compact('order'));
    }

    // ØµÙØ­Ø© Ø§Ù„ÙØ´Ù„
    public function failed(Order $order)
    {
        return view('customer.payment.failed', compact('order'));
    }

    // Webhook Ù…Ù† Tap.sa
    public function webhook(Request $request)
    {
        // - Verify webhook signature
        // - Get transaction ID
        // - Verify payment
        // - Update order status
        // - Return 200 OK
        
        $verified = $this->paymentService->verifyPayment($request->transaction_id);
        
        return response()->json(['status' => 'success']);
    }
}
```

---

## ğŸ“ 3.5 - Commission Controllers

**â° Ø§Ù„ÙˆÙ‚Øª:** 1.5 Ø³Ø§Ø¹Ø©

### CommissionController.php

**Ø§Ù„Ù…Ø³Ø§Ø±:** `app/Http/Controllers/Customer/CommissionController.php`

```php
<?php
namespace App\Http\Controllers\Customer;

use App\Services\CommissionService;

class CommissionController extends Controller
{
    public function __construct(private CommissionService $commissionService)
    {}

    // Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø¹Ù…ÙˆÙ„Ø§Øª
    public function dashboard()
    {
        $user = auth()->user();
        
        $balance = $this->commissionService->getUserBalance($user);
        $performance = $this->commissionService->getPerformanceReport($user);
        
        return view('customer.commission.dashboard', compact('balance', 'performance'));
    }

    // Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…ÙˆÙ„Ø§Øª
    public function history()
    {
        $commissions = auth()->user()
            ->commissions()
            ->latest()
            ->paginate(20);
        
        return view('customer.commission.history', compact('commissions'));
    }

    // Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©
    public function payouts()
    {
        $payouts = auth()->user()
            ->payouts()
            ->latest()
            ->paginate(20);
        
        return view('customer.commission.payouts', compact('payouts'));
    }

    // Ø·Ù„Ø¨ ØªØ­ÙˆÙŠÙ„
    public function requestPayout(Request $request)
    {
        $payout = $this->commissionService->createPayout(
            auth()->user(),
            $request->amount
        );
        
        return back()->with('success', 'ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„ØªØ­ÙˆÙŠÙ„');
    }
}
```

---

## âœ… Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3:

### Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„ØªÙŠ Ø³ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡Ø§/ØªØ­Ø¯ÙŠØ«Ù‡Ø§:

```
app/Http/Controllers/
â”œâ”€â”€ Auth/
â”‚   â”œâ”€â”€ LoginController.php âœ…
â”‚   â”œâ”€â”€ RegisterController.php âœ…
â”‚   â”œâ”€â”€ ForgotPasswordController.php â³
â”‚   â”œâ”€â”€ ResetPasswordController.php â³
â”‚   â””â”€â”€ EmailVerificationController.php â³
â”œâ”€â”€ Public/
â”‚   â”œâ”€â”€ HomeController.php â³
â”‚   â”œâ”€â”€ PricingController.php â³
â”‚   â”œâ”€â”€ TemplateGalleryController.php â³
â”‚   â””â”€â”€ CardViewController.php â³
â””â”€â”€ Customer/
    â”œâ”€â”€ DashboardController.php âœ… (ØªØ­Ø³ÙŠÙ†)
    â”œâ”€â”€ CardController.php â³
    â”œâ”€â”€ OrderController.php â³
    â”œâ”€â”€ AnalyticsController.php â³
    â”œâ”€â”€ ProfileController.php â³
    â”œâ”€â”€ NotificationController.php â³
    â”œâ”€â”€ PaymentController.php â³
    â””â”€â”€ CommissionController.php â³
```

**â° Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:** 10 Ø³Ø§Ø¹Ø§Øª

---

# ğŸ¨ Ø§Ù„Ù…Ø±Ø­Ù„Ø© 4: Filament Admin Dashboard

## Ø§Ù„Ø­Ø§Ù„Ø©: â³ 20% - ÙŠØ­ØªØ§Ø¬ Ø§Ø³ØªÙƒÙ…Ø§Ù„ ÙƒØ¨ÙŠØ±

**â° Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªÙˆÙ‚Ø¹:** 10 Ø³Ø§Ø¹Ø§Øª

---

## ğŸ“Š 4.1 - Dashboard Page & Widgets

**â° Ø§Ù„ÙˆÙ‚Øª:** 2 Ø³Ø§Ø¹Ø§Øª

### Dashboard.php

**Ø§Ù„Ù…Ø³Ø§Ø±:** `app/Filament/Pages/Dashboard.php`

```php
<?php
namespace App\Filament\Pages;

use Filament\Pages\Dashboard as BaseDashboard;

class Dashboard extends BaseDashboard
{
    protected static ?string $title = 'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…';
    
    public function getWidgets(): array
    {
        return [
            Widgets\StatsOverviewWidget::class,
            Widgets\RevenueChartWidget::class,
            Widgets\OrdersChartWidget::class,
            Widgets\QuickActionsWidget::class,
        ];
    }
}
```

### StatsOverviewWidget.php

**Ø§Ù„Ù…Ø³Ø§Ø±:** `app/Filament/Widgets/StatsOverviewWidget.php`

```php
<?php
namespace App\Filament\Widgets;

use Filament\Widgets\StatsOverviewWidget as BaseWidget;
use Filament\Widgets\StatsOverviewWidget\Stat;

class StatsOverviewWidget extends BaseWidget
{
    protected function getStats(): array
    {
        return [
            Stat::make('Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†', User::count())
                ->description('Ø²ÙŠØ§Ø¯Ø© 12% Ø¹Ù† Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ù…Ø§Ø¶ÙŠ')
                ->descriptionIcon('heroicon-m-arrow-trending-up')
                ->color('success'),
            
            Stat::make('Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª', Card::count())
                ->description('Ù…Ù†Ù‡Ø§ ' . Card::active()->count() . ' Ù†Ø´Ø·Ø©')
                ->color('primary'),
            
            Stat::make('Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª', Order::count())
                ->description(Order::where('status', 'pending')->count() . ' Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±')
                ->color('warning'),
            
            Stat::make('Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª', number_format(Order::sum('total'), 2) . ' Ø±.Ø³')
                ->description('Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±')
                ->descriptionIcon('heroicon-m-currency-dollar')
                ->color('success'),
        ];
    }
}
```

### RevenueChartWidget.php

```php
<?php
namespace App\Filament\Widgets;

use Filament\Widgets\ChartWidget;

class RevenueChartWidget extends ChartWidget
{
    protected static ?string $heading = 'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª (Ø¢Ø®Ø± 30 ÙŠÙˆÙ…)';
    
    protected function getData(): array
    {
        // Get revenue data for last 30 days
        $data = Order::selectRaw('DATE(created_at) as date, SUM(total) as total')
            ->where('created_at', '>=', now()->subDays(30))
            ->groupBy('date')
            ->orderBy('date')
            ->get();
        
        return [
            'datasets' => [
                [
                    'label' => 'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª (Ø±.Ø³)',
                    'data' => $data->pluck('total')->toArray(),
                ],
            ],
            'labels' => $data->pluck('date')->toArray(),
        ];
    }
    
    protected function getType(): string
    {
        return 'line';
    }
}
```

### OrdersChartWidget.php

```php
<?php
namespace App\Filament\Widgets;

use Filament\Widgets\ChartWidget;

class OrdersChartWidget extends ChartWidget
{
    protected static ?string $heading = 'Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø©';
    
    protected function getData(): array
    {
        return [
            'datasets' => [
                [
                    'label' => 'Ø§Ù„Ø·Ù„Ø¨Ø§Øª',
                    'data' => [
                        Order::where('status', 'pending')->count(),
                        Order::where('status', 'processing')->count(),
                        Order::where('status', 'completed')->count(),
                        Order::where('status', 'cancelled')->count(),
                    ],
                    'backgroundColor' => [
                        'rgb(255, 205, 86)',
                        'rgb(54, 162, 235)',
                        'rgb(75, 192, 192)',
                        'rgb(255, 99, 132)',
                    ],
                ],
            ],
            'labels' => ['Ù…Ø¹Ù„Ù‚', 'Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©', 'Ù…ÙƒØªÙ…Ù„', 'Ù…Ù„ØºÙŠ'],
        ];
    }
    
    protected function getType(): string
    {
        return 'doughnut';
    }
}
```

### QuickActionsWidget.php

```php
<?php
namespace App\Filament\Widgets;

use Filament\Widgets\Widget;

class QuickActionsWidget extends Widget
{
    protected static string $view = 'filament.widgets.quick-actions';
    
    protected int | string | array $columnSpan = 'full';
}
```

**View:** `resources/views/filament/widgets/quick-actions.blade.php`

```blade
<x-filament-widgets::widget>
    <x-filament::section>
        <div class="grid grid-cols-4 gap-4">
            <a href="{{ route('filament.admin.resources.cards.create') }}" 
               class="p-4 text-center bg-primary-50 rounded-lg hover:bg-primary-100">
                <x-heroicon-o-plus-circle class="w-8 h-8 mx-auto text-primary-600" />
                <p class="mt-2 font-medium">Ø¥Ù†Ø´Ø§Ø¡ Ø¨Ø·Ø§Ù‚Ø©</p>
            </a>
            
            <a href="{{ route('filament.admin.resources.orders.create') }}" 
               class="p-4 text-center bg-success-50 rounded-lg hover:bg-success-100">
                <x-heroicon-o-shopping-cart class="w-8 h-8 mx-auto text-success-600" />
                <p class="mt-2 font-medium">Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯</p>
            </a>
            
            <a href="{{ route('filament.admin.resources.users.create') }}" 
               class="p-4 text-center bg-warning-50 rounded-lg hover:bg-warning-100">
                <x-heroicon-o-user-plus class="w-8 h-8 mx-auto text-warning-600" />
                <p class="mt-2 font-medium">Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯</p>
            </a>
            
            <a href="{{ route('filament.admin.pages.settings') }}" 
               class="p-4 text-center bg-gray-50 rounded-lg hover:bg-gray-100">
                <x-heroicon-o-cog-6-tooth class="w-8 h-8 mx-auto text-gray-600" />
                <p class="mt-2 font-medium">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</p>
            </a>
        </div>
    </x-filament::section>
</x-filament-widgets::widget>
```

---

## ğŸ“Š 4.2 - Filament Resources

**â° Ø§Ù„ÙˆÙ‚Øª:** 6 Ø³Ø§Ø¹Ø§Øª

### CardResource.php

**Ø§Ù„Ù…Ø³Ø§Ø±:** `app/Filament/Resources/CardResource.php`  
**â° Ø§Ù„ÙˆÙ‚Øª:** 1 Ø³Ø§Ø¹Ø©

```php
<?php
namespace App\Filament\Resources;

use App\Filament\Resources\CardResource\Pages;
use App\Models\Card;
use Filament\Forms;
use Filament\Forms\Form;
use Filament\Resources\Resource;
use Filament\Tables;
use Filament\Tables\Table;

class CardResource extends Resource
{
    protected static ?string $model = Card::class;
    protected static ?string $navigationIcon = 'heroicon-o-credit-card';
    protected static ?string $navigationLabel = 'Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª';
    protected static ?int $navigationSort = 2;

    public static function form(Form $form): Form
    {
        return $form
            ->schema([
                Forms\Components\Section::make('Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©')
                    ->schema([
                        Forms\Components\TextInput::make('name')
                            ->label('Ø§Ø³Ù… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©')
                            ->required()
                            ->maxLength(255),
                        
                        Forms\Components\TextInput::make('username')
                            ->label('Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…')
                            ->required()
                            ->unique(ignoreRecord: true)
                            ->alphaDash()
                            ->maxLength(255),
                        
                        Forms\Components\Select::make('user_id')
                            ->label('Ø§Ù„Ù…Ø§Ù„Ùƒ')
                            ->relationship('user', 'name')
                            ->searchable()
                            ->required(),
                        
                        Forms\Components\Select::make('template_id')
                            ->label('Ø§Ù„Ù‚Ø§Ù„Ø¨')
                            ->relationship('template', 'name')
                            ->searchable()
                            ->required(),
                        
                        Forms\Components\Select::make('type')
                            ->label('Ø§Ù„Ù†ÙˆØ¹')
                            ->options([
                                'personal' => 'Ø´Ø®ØµÙŠ',
                                'business' => 'Ø¹Ù…Ù„',
                                'professional' => 'Ø§Ø­ØªØ±Ø§ÙÙŠ',
                            ])
                            ->required(),
                        
                        Forms\Components\Select::make('status')
                            ->label('Ø§Ù„Ø­Ø§Ù„Ø©')
                            ->options([
                                'active' => 'Ù†Ø´Ø·',
                                'inactive' => 'ØºÙŠØ± Ù†Ø´Ø·',
                                'draft' => 'Ù…Ø³ÙˆØ¯Ø©',
                            ])
                            ->default('draft')
                            ->required(),
                    ])->columns(2),
                
                Forms\Components\Section::make('Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„')
                    ->schema([
                        Forms\Components\TextInput::make('phone')
                            ->label('Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„')
                            ->tel()
                            ->maxLength(255),
                        
                        Forms\Components\TextInput::make('email')
                            ->label('Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ')
                            ->email()
                            ->maxLength(255),
                        
                        Forms\Components\TextInput::make('website')
                            ->label('Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ')
                            ->url()
                            ->maxLength(255),
                        
                        Forms\Components\TextInput::make('address')
                            ->label('Ø§Ù„Ø¹Ù†ÙˆØ§Ù†')
                            ->maxLength(500),
                    ])->columns(2),
                
                Forms\Components\Section::make('Ø§Ù„ÙˆØµÙ ÙˆØ§Ù„ØµÙˆØ±')
                    ->schema([
                        Forms\Components\Textarea::make('bio')
                            ->label('Ù†Ø¨Ø°Ø© ØªØ¹Ø±ÙŠÙÙŠØ©')
                            ->rows(3)
                            ->maxLength(1000),
                        
                        Forms\Components\FileUpload::make('profile_image')
                            ->label('ØµÙˆØ±Ø© Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ')
                            ->image()
                            ->directory('cards/profiles')
                            ->maxSize(2048),
                        
                        Forms\Components\FileUpload::make('cover_image')
                            ->label('ØµÙˆØ±Ø© Ø§Ù„ØºÙ„Ø§Ù')
                            ->image()
                            ->directory('cards/covers')
                            ->maxSize(4096),
                    ]),
                
                Forms\Components\Section::make('ÙˆØ³Ø§Ø¦Ù„ Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ')
                    ->schema([
                        Forms\Components\Repeater::make('social_links')
                            ->label('Ø§Ù„Ø±ÙˆØ§Ø¨Ø·')
                            ->schema([
                                Forms\Components\Select::make('platform')
                                    ->options([
                                        'twitter' => 'Twitter',
                                        'linkedin' => 'LinkedIn',
                                        'instagram' => 'Instagram',
                                        'facebook' => 'Facebook',
                                        'youtube' => 'YouTube',
                                        'tiktok' => 'TikTok',
                                    ])
                                    ->required(),
                                
                                Forms\Components\TextInput::make('url')
                                    ->url()
                                    ->required(),
                            ])
                            ->columns(2)
                            ->collapsible(),
                    ]),
            ]);
    }

    public static function table(Table $table): Table
    {
        return $table
            ->columns([
                Tables\Columns\TextColumn::make('name')
                    ->label('Ø§Ø³Ù… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©')
                    ->searchable()
                    ->sortable(),
                
                Tables\Columns\TextColumn::make('username')
                    ->label('Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…')
                    ->searchable()
                    ->copyable()
                    ->copyMessage('ØªÙ… Ø§Ù„Ù†Ø³Ø®!')
                    ->sortable(),
                
                Tables\Columns\TextColumn::make('user.name')
                    ->label('Ø§Ù„Ù…Ø§Ù„Ùƒ')
                    ->searchable()
                    ->sortable(),
                
                Tables\Columns\BadgeColumn::make('type')
                    ->label('Ø§Ù„Ù†ÙˆØ¹')
                    ->colors([
                        'primary' => 'personal',
                        'success' => 'business',
                        'warning' => 'professional',
                    ]),
                
                Tables\Columns\BadgeColumn::make('status')
                    ->label('Ø§Ù„Ø­Ø§Ù„Ø©')
                    ->colors([
                        'success' => 'active',
                        'danger' => 'inactive',
                        'warning' => 'draft',
                    ]),
                
                Tables\Columns\TextColumn::make('views_count')
                    ->label('Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø§Øª')
                    ->sortable()
                    ->alignCenter(),
                
                Tables\Columns\TextColumn::make('created_at')
                    ->label('ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡')
                    ->dateTime('d/m/Y')
                    ->sortable(),
            ])
            ->filters([
                Tables\Filters\SelectFilter::make('type')
                    ->label('Ø§Ù„Ù†ÙˆØ¹')
                    ->options([
                        'personal' => 'Ø´Ø®ØµÙŠ',
                        'business' => 'Ø¹Ù…Ù„',
                        'professional' => 'Ø§Ø­ØªØ±Ø§ÙÙŠ',
                    ]),
                
                Tables\Filters\SelectFilter::make('status')
                    ->label('Ø§Ù„Ø­Ø§Ù„Ø©')
                    ->options([
                        'active' => 'Ù†Ø´Ø·',
                        'inactive' => 'ØºÙŠØ± Ù†Ø´Ø·',
                        'draft' => 'Ù…Ø³ÙˆØ¯Ø©',
                    ]),
                
                Tables\Filters\Filter::make('created_at')
                    ->form([
                        Forms\Components\DatePicker::make('created_from')->label('Ù…Ù† ØªØ§Ø±ÙŠØ®'),
                        Forms\Components\DatePicker::make('created_until')->label('Ø¥Ù„Ù‰ ØªØ§Ø±ÙŠØ®'),
                    ])
                    ->query(function ($query, array $data) {
                        return $query
                            ->when($data['created_from'], fn($q) => $q->whereDate('created_at', '>=', $data['created_from']))
                            ->when($data['created_until'], fn($q) => $q->whereDate('created_at', '<=', $data['created_until']));
                    }),
            ])
            ->actions([
                Tables\Actions\ViewAction::make(),
                Tables\Actions\EditAction::make(),
                Tables\Actions\DeleteAction::make(),
            ])
            ->bulkActions([
                Tables\Actions\BulkActionGroup::make([
                    Tables\Actions\DeleteBulkAction::make(),
                    Tables\Actions\BulkAction::make('activate')
                        ->label('ØªÙØ¹ÙŠÙ„')
                        ->icon('heroicon-o-check-circle')
                        ->requiresConfirmation()
                        ->action(fn (Collection $records) => $records->each->update(['status' => 'active'])),
                    
                    Tables\Actions\BulkAction::make('deactivate')
                        ->label('ØªØ¹Ø·ÙŠÙ„')
                        ->icon('heroicon-o-x-circle')
                        ->requiresConfirmation()
                        ->action(fn (Collection $records) => $records->each->update(['status' => 'inactive'])),
                ]),
            ]);
    }

    public static function getPages(): array
    {
        return [
            'index' => Pages\ListCards::route('/'),
            'create' => Pages\CreateCard::route('/create'),
            'edit' => Pages\EditCard::route('/{record}/edit'),
        ];
    }
}
```

---

### OrderResource.php

**Ø§Ù„Ù…Ø³Ø§Ø±:** `app/Filament/Resources/OrderResource.php`  
**â° Ø§Ù„ÙˆÙ‚Øª:** 1 Ø³Ø§Ø¹Ø©

```php
<?php
namespace App\Filament\Resources;

use App\Filament\Resources\OrderResource\Pages;
use App\Models\Order;
use Filament\Forms;
use Filament\Forms\Form;
use Filament\Resources\Resource;
use Filament\Tables;
use Filament\Tables\Table;

class OrderResource extends Resource
{
    protected static ?string $model = Order::class;
    protected static ?string $navigationIcon = 'heroicon-o-shopping-bag';
    protected static ?string $navigationLabel = 'Ø§Ù„Ø·Ù„Ø¨Ø§Øª';
    protected static ?int $navigationSort = 3;

    public static function form(Form $form): Form
    {
        return $form
            ->schema([
                Forms\Components\Section::make('Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø·Ù„Ø¨')
                    ->schema([
                        Forms\Components\Select::make('user_id')
                            ->label('Ø§Ù„Ø¹Ù…ÙŠÙ„')
                            ->relationship('user', 'name')
                            ->searchable()
                            ->required(),
                        
                        Forms\Components\Select::make('card_id')
                            ->label('Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©')
                            ->relationship('card', 'name')
                            ->searchable()
                            ->required(),
                        
                        Forms\Components\TextInput::make('quantity')
                            ->label('Ø§Ù„ÙƒÙ…ÙŠØ©')
                            ->numeric()
                            ->default(1)
                            ->minValue(1)
                            ->required(),
                        
                        Forms\Components\TextInput::make('price')
                            ->label('Ø§Ù„Ø³Ø¹Ø±')
                            ->numeric()
                            ->prefix('Ø±.Ø³')
                            ->required(),
                        
                        Forms\Components\TextInput::make('tax')
                            ->label('Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©')
                            ->numeric()
                            ->prefix('Ø±.Ø³')
                            ->default(0),
                        
                        Forms\Components\TextInput::make('discount')
                            ->label('Ø§Ù„Ø®ØµÙ…')
                            ->numeric()
                            ->prefix('Ø±.Ø³')
                            ->default(0),
                        
                        Forms\Components\TextInput::make('total')
                            ->label('Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ')
                            ->numeric()
                            ->prefix('Ø±.Ø³')
                            ->required(),
                        
                        Forms\Components\Select::make('status')
                            ->label('Ø§Ù„Ø­Ø§Ù„Ø©')
                            ->options([
                                'pending' => 'Ù…Ø¹Ù„Ù‚',
                                'processing' => 'Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©',
                                'completed' => 'Ù…ÙƒØªÙ…Ù„',
                                'cancelled' => 'Ù…Ù„ØºÙŠ',
                            ])
                            ->default('pending')
                            ->required(),
                        
                        Forms\Components\Select::make('payment_status')
                            ->label('Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹')
                            ->options([
                                'pending' => 'Ù…Ø¹Ù„Ù‚',
                                'paid' => 'Ù…Ø¯ÙÙˆØ¹',
                                'failed' => 'ÙØ´Ù„',
                                'refunded' => 'Ù…Ø³ØªØ±Ø¬Ø¹',
                            ])
                            ->default('pending')
                            ->required(),
                    ])->columns(2),
                
                Forms\Components\Section::make('Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©')
                    ->schema([
                        Forms\Components\Textarea::make('notes')
                            ->label('Ù…Ù„Ø§Ø­Ø¸Ø§Øª')
                            ->rows(3),
                    ]),
            ]);
    }

    public static function table(Table $table): Table
    {
        return $table
            ->columns([
                Tables\Columns\TextColumn::make('id')
                    ->label('Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨')
                    ->formatStateUsing(fn ($state) => '#ORDER-' . str_pad($state, 5, '0', STR_PAD_LEFT))
                    ->searchable()
                    ->sortable(),
                
                Tables\Columns\TextColumn::make('user.name')
                    ->label('Ø§Ù„Ø¹Ù…ÙŠÙ„')
                    ->searchable()
                    ->sortable(),
                
                Tables\Columns\TextColumn::make('card.name')
                    ->label('Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©')
                    ->searchable()
                    ->limit(30),
                
                Tables\Columns\TextColumn::make('total')
                    ->label('Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ')
                    ->money('SAR')
                    ->sortable(),
                
                Tables\Columns\BadgeColumn::make('status')
                    ->label('Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨')
                    ->colors([
                        'warning' => 'pending',
                        'primary' => 'processing',
                        'success' => 'completed',
                        'danger' => 'cancelled',
                    ])
                    ->icons([
                        'heroicon-o-clock' => 'pending',
                        'heroicon-o-arrow-path' => 'processing',
                        'heroicon-o-check-circle' => 'completed',
                        'heroicon-o-x-circle' => 'cancelled',
                    ]),
                
                Tables\Columns\BadgeColumn::make('payment_status')
                    ->label('Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹')
                    ->colors([
                        'warning' => 'pending',
                        'success' => 'paid',
                        'danger' => 'failed',
                        'info' => 'refunded',
                    ]),
                
                Tables\Columns\TextColumn::make('created_at')
                    ->label('ØªØ§Ø±ÙŠØ® Ø§Ù„Ø·Ù„Ø¨')
                    ->dateTime('d/m/Y H:i')
                    ->sortable(),
            ])
            ->defaultSort('created_at', 'desc')
            ->filters([
                Tables\Filters\SelectFilter::make('status')
                    ->label('Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨')
                    ->options([
                        'pending' => 'Ù…Ø¹Ù„Ù‚',
                        'processing' => 'Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©',
                        'completed' => 'Ù…ÙƒØªÙ…Ù„',
                        'cancelled' => 'Ù…Ù„ØºÙŠ',
                    ]),
                
                Tables\Filters\SelectFilter::make('payment_status')
                    ->label('Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹')
                    ->options([
                        'pending' => 'Ù…Ø¹Ù„Ù‚',
                        'paid' => 'Ù…Ø¯ÙÙˆØ¹',
                        'failed' => 'ÙØ´Ù„',
                        'refunded' => 'Ù…Ø³ØªØ±Ø¬Ø¹',
                    ]),
                
                Tables\Filters\Filter::make('created_at')
                    ->form([
                        Forms\Components\DatePicker::make('created_from')->label('Ù…Ù† ØªØ§Ø±ÙŠØ®'),
                        Forms\Components\DatePicker::make('created_until')->label('Ø¥Ù„Ù‰ ØªØ§Ø±ÙŠØ®'),
                    ]),
            ])
            ->actions([
                Tables\Actions\ViewAction::make(),
                Tables\Actions\EditAction::make(),
                
                Tables\Actions\Action::make('change_status')
                    ->label('ØªØºÙŠÙŠØ± Ø§Ù„Ø­Ø§Ù„Ø©')
                    ->icon('heroicon-o-arrow-path')
                    ->form([
                        Forms\Components\Select::make('status')
                            ->options([
                                'pending' => 'Ù…Ø¹Ù„Ù‚',
                                'processing' => 'Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©',
                                'completed' => 'Ù…ÙƒØªÙ…Ù„',
                                'cancelled' => 'Ù…Ù„ØºÙŠ',
                            ])
                            ->required(),
                    ])
                    ->action(function (Order $record, array $data) {
                        $record->update(['status' => $data['status']]);
                        // Send notification email
                    }),
            ])
            ->bulkActions([
                Tables\Actions\BulkActionGroup::make([
                    Tables\Actions\DeleteBulkAction::make(),
                ]),
            ]);
    }

    public static function getPages(): array
    {
        return [
            'index' => Pages\ListOrders::route('/'),
            'create' => Pages\CreateOrder::route('/create'),
            'edit' => Pages\EditOrder::route('/{record}/edit'),
        ];
    }
}
```

---

**Ø¨Ø³Ø¨Ø¨ Ø·ÙˆÙ„ Ø§Ù„Ø±Ø¯ØŒ Ø³Ø£ÙƒÙ…Ù„ Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ù…Ø±Ø§Ø­Ù„ ÙÙŠ Ø§Ù„Ø±Ø¯ Ø§Ù„ØªØ§Ù„ÙŠ. Ù‡Ù„ ØªØ±ÙŠØ¯ Ù…Ù†ÙŠ:**
1. âœ… Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø¨Ø¨Ø§Ù‚ÙŠ Resources (Coupon, Partner, Reseller, etc.)
2. âœ… Ø«Ù… Ø§Ù„Ù…Ø±Ø­Ù„Ø© 5 (Frontend Views)
3. âœ… Ø«Ù… Ø§Ù„Ù…Ø±Ø­Ù„Ø© 6 (API)
4. âœ… Ø«Ù… Ø§Ù„Ù…Ø±Ø­Ù„Ø© 7 (Email System)
5. âœ… Ø«Ù… Ø§Ù„Ù…Ø±Ø­Ù„Ø© 8 (Testing)

